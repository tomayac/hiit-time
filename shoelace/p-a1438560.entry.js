import{r as t,c as s,h as r,g as i}from"./p-bf36b983.js";const h=new Map,c=class{constructor(r){t(this,r),this.slLoad=s(this,"sl-load",7),this.slError=s(this,"sl-error",7),this.html="",this.mode="cors",this.allowScripts=!1}handleSrcChange(){this.loadSource()}componentWillLoad(){this.loadSource()}executeScript(t){const s=document.createElement("script");[...t.attributes].map((t=>s.setAttribute(t.name,t.value))),s.textContent=t.textContent,t.parentNode.replaceChild(s,t)}async loadSource(){try{const t=this.src,s=await(async(t,s="cors")=>{if(h.has(t))return h.get(t);{const r=fetch(t,{mode:s}).then((async t=>({ok:t.ok,status:t.status,html:await t.text()})));return h.set(t,r),r}})(t,this.mode);if(t!==this.src)return;if(!s.ok)return void this.slError.emit({status:s.status});this.host.innerHTML=s.html,this.allowScripts&&[...this.host.querySelectorAll("script")].map((t=>this.executeScript(t))),this.slLoad.emit()}catch(t){this.slError.emit()}}render(){return r("slot",null)}get host(){return i(this)}static get watchers(){return{src:["handleSrcChange"]}}};c.style=":host{display:block}";export{c as sl_include}