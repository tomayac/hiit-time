import{r as t,c as e,h as s,g as l}from"./p-bf36b983.js";import{g as i,h as a}from"./p-c650e734.js";import{F as o}from"./p-d1be58c6.js";let r=0;const n=class{constructor(s){t(this,s),this.slChange=e(this,"sl-change",7),this.slFocus=e(this,"sl-focus",7),this.slBlur=e(this,"sl-blur",7),this.inputId="select-"+ ++r,this.labelId="select-label-"+r,this.helpTextId="select-help-text-"+r,this.hasFocus=!1,this.hasHelpTextSlot=!1,this.hasLabelSlot=!1,this.isOpen=!1,this.items=[],this.displayLabel="",this.displayTags=[],this.multiple=!1,this.maxTagsVisible=3,this.disabled=!1,this.name="",this.placeholder="",this.size="medium",this.hoist=!1,this.value="",this.pill=!1,this.label="",this.helpText="",this.required=!1,this.clearable=!1,this.invalid=!1}handleDisabledChange(){this.disabled&&this.isOpen&&this.dropdown.hide()}handleLabelChange(){this.handleSlotChange()}handleMultipleChange(){const t=this.getValueAsArray();this.value=this.multiple?t:t[0]||"",this.syncItemsFromValue()}handleValueChange(){this.syncItemsFromValue(),this.slChange.emit()}connectedCallback(){this.handleBlur=this.handleBlur.bind(this),this.handleFocus=this.handleFocus.bind(this),this.handleClearClick=this.handleClearClick.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleLabelClick=this.handleLabelClick.bind(this),this.handleMenuHide=this.handleMenuHide.bind(this),this.handleMenuShow=this.handleMenuShow.bind(this),this.handleMenuSelect=this.handleMenuSelect.bind(this),this.handleSlotChange=this.handleSlotChange.bind(this),this.handleTagInteraction=this.handleTagInteraction.bind(this),this.host.shadowRoot.addEventListener("slotchange",this.handleSlotChange)}componentWillLoad(){this.handleSlotChange()}componentDidLoad(){this.resizeObserver=new ResizeObserver((()=>this.resizeMenu())),this.reportDuplicateItemValues(),requestAnimationFrame((()=>this.syncItemsFromValue()))}disconnectedCallback(){this.host.shadowRoot.removeEventListener("slotchange",this.handleSlotChange)}async reportValidity(){return this.input.reportValidity()}async setCustomValidity(t){this.input.setCustomValidity(t),this.invalid=!this.input.checkValidity()}getItemLabel(t){const e=t.shadowRoot.querySelector("slot:not([name])");return i(e)}getItems(){return[...this.host.querySelectorAll("sl-menu-item")]}getValueAsArray(){return Array.isArray(this.value)?this.value:[this.value]}handleBlur(){this.hasFocus=!1,this.slBlur.emit()}handleFocus(){this.hasFocus=!0,this.slFocus.emit()}handleClearClick(t){t.stopPropagation(),this.value=this.multiple?[]:"",this.syncItemsFromValue()}handleKeyDown(t){const e=t.target,s=this.getItems(),l=s[0],i=s[s.length-1];if("sl-tag"!==e.tagName.toLowerCase())if("Tab"!==t.key){if(["ArrowDown","ArrowUp"].includes(t.key)){if(t.preventDefault(),this.isOpen||this.dropdown.show(),"ArrowDown"===t.key&&l)return void l.setFocus();if("ArrowUp"===t.key&&i)return void i.setFocus()}this.isOpen||(t.stopPropagation(),t.preventDefault(),this.dropdown.show(),this.menu.typeToSelect(t.key))}else this.isOpen&&this.dropdown.hide()}handleLabelClick(){this.box.focus()}handleMenuSelect(t){const e=t.detail.item;this.value=this.multiple?this.value.includes(e.value)?this.value.filter((t=>t!==e.value)):[...this.value,e.value]:e.value,this.syncItemsFromValue()}handleMenuShow(t){this.disabled?t.preventDefault():(this.resizeMenu(),this.resizeObserver.observe(this.host),this.isOpen=!0)}handleMenuHide(){this.resizeObserver.unobserve(this.host),this.isOpen=!1}handleSlotChange(){this.hasHelpTextSlot=a(this.host,"help-text"),this.hasLabelSlot=a(this.host,"label"),this.syncItemsFromValue(),this.reportDuplicateItemValues()}handleTagInteraction(t){t.composedPath().find((t=>{if(t instanceof HTMLElement)return"clear-button"===t.getAttribute("part")}))&&t.stopPropagation()}reportDuplicateItemValues(){const t=this.getItems().map((t=>t.value)).filter(((t,e,s)=>s.indexOf(t)!==e));if(t.length)throw new Error('Duplicate value found on <sl-menu-item> in <sl-select>: "'+t.join('", "')+'"')}resizeMenu(){this.menu.style.width=this.box.clientWidth+"px"}syncItemsFromValue(){const t=this.getItems(),e=this.getValueAsArray();if(t.map((t=>t.checked=e.includes(t.value))),this.multiple){const l=[];if(e.map((e=>t.map((t=>t.value===e?l.push(t):null)))),this.displayTags=l.map((t=>s("sl-tag",{exportparts:"base:tag",type:"info",size:this.size,pill:this.pill,clearable:!0,onClick:this.handleTagInteraction,onKeyDown:this.handleTagInteraction,"onSl-clear":e=>{e.stopPropagation(),this.disabled||(t.checked=!1,this.syncValueFromItems())}},this.getItemLabel(t)))),this.maxTagsVisible>0&&this.displayTags.length>this.maxTagsVisible){const t=this.displayTags.length;this.displayLabel="",this.displayTags=this.displayTags.slice(0,this.maxTagsVisible),this.displayTags.push(s("sl-tag",{exportparts:"base:tag",type:"info",size:this.size},"+",t-this.maxTagsVisible))}}else{const s=t.filter((t=>t.value===e[0]))[0];this.displayLabel=s?this.getItemLabel(s):"",this.displayTags=[]}}syncValueFromItems(){const t=this.getItems().filter((t=>t.checked)).map((t=>t.value));this.value=this.multiple?this.value.filter((e=>t.includes(e))):t.length>0?t[0]:""}render(){var t;const e=this.multiple?this.value.length>0:""!==this.value;return s(o,{inputId:this.inputId,label:this.label,labelId:this.labelId,hasLabelSlot:this.hasLabelSlot,helpTextId:this.helpTextId,helpText:this.helpText,hasHelpTextSlot:this.hasHelpTextSlot,size:this.size,onLabelClick:this.handleLabelClick},s("sl-dropdown",{part:"base",ref:t=>this.dropdown=t,hoist:this.hoist,closeOnSelect:!this.multiple,containingElement:this.host,class:{select:!0,"select--open":this.isOpen,"select--empty":0===(null===(t=this.value)||void 0===t?void 0:t.length),"select--focused":this.hasFocus,"select--clearable":this.clearable,"select--disabled":this.disabled,"select--multiple":this.multiple,"select--has-tags":this.multiple&&e,"select--placeholder-visible":""===this.displayLabel,"select--small":"small"===this.size,"select--medium":"medium"===this.size,"select--large":"large"===this.size,"select--pill":this.pill,"select--invalid":this.invalid},"onSl-show":this.handleMenuShow,"onSl-hide":this.handleMenuHide},s("div",{slot:"trigger",ref:t=>this.box=t,id:this.inputId,class:"select__box",role:"combobox","aria-labelledby":this.labelId,"aria-describedby":this.helpTextId,"aria-haspopup":"true","aria-expanded":this.isOpen?"true":"false",tabIndex:this.disabled?-1:0,onBlur:this.handleBlur,onFocus:this.handleFocus,onKeyDown:this.handleKeyDown},s("div",{class:"select__label"},this.displayTags.length?s("span",{part:"tags",class:"select__tags"},this.displayTags):this.displayLabel||this.placeholder),this.clearable&&e&&s("sl-icon-button",{exportparts:"base:clear-button",class:"select__clear",name:"x-circle",onClick:this.handleClearClick,tabindex:"-1"}),s("span",{part:"icon",class:"select__icon"},s("sl-icon",{name:"chevron-down"})),s("input",{ref:t=>this.input=t,class:"select__hidden-select","aria-hidden":"true",required:this.required,value:e?"1":"",tabIndex:-1})),s("sl-menu",{ref:t=>this.menu=t,part:"menu",class:"select__menu","onSl-select":this.handleMenuSelect},s("slot",{onSlotchange:this.handleSlotChange}))))}get host(){return l(this)}static get watchers(){return{disabled:["handleDisabledChange"],label:["handleLabelChange"],multiple:["handleMultipleChange"],value:["handleValueChange"]}}};n.style=":host{position:relative;box-sizing:border-box}:host *,:host *:before,:host *:after{box-sizing:inherit}.form-control .form-control__label{display:none}.form-control .form-control__help-text{display:none}.form-control--has-label .form-control__label{display:inline-block;color:var(--sl-input-label-color);margin-bottom:var(--sl-spacing-xxx-small)}.form-control--has-label.form-control--small .form-control__label{font-size:var(--sl-input-label-font-size-small)}.form-control--has-label.form-control--medium .form-control__label{font-size:var(--sl-input-label-font-size-medium)}.form-control--has-label.form-control--large .form-control_label{font-size:var(--sl-input-label-font-size-large)}.form-control--has-help-text .form-control__help-text{display:block;color:var(--sl-input-help-text-color)}.form-control--has-help-text .form-control__help-text ::slotted(*){margin-top:var(--sl-spacing-xxx-small)}.form-control--has-help-text.form-control--small .form-control__help-text{font-size:var(--sl-input-help-text-font-size-small)}.form-control--has-help-text.form-control--medium .form-control__help-text{font-size:var(--sl-input-help-text-font-size-medium)}.form-control--has-help-text.form-control--large .form-control__help-text{font-size:var(--sl-input-help-text-font-size-large)}:host{--focus-ring:0 0 0 var(--sl-focus-ring-width) var(--sl-focus-ring-color-primary);display:block}.select{display:block}.select__box{display:inline-flex;align-items:center;justify-content:start;position:relative;width:100%;font-family:var(--sl-input-font-family);font-weight:var(--sl-input-font-weight);letter-spacing:var(--sl-input-letter-spacing);background-color:var(--sl-input-background-color);border:solid var(--sl-input-border-width) var(--sl-input-border-color);vertical-align:middle;overflow:hidden;transition:var(--sl-transition-fast) color, var(--sl-transition-fast) border, var(--sl-transition-fast) box-shadow;cursor:pointer}.select:not(.select--disabled) .select__box:hover{background-color:var(--sl-input-background-color-hover);border-color:var(--sl-input-border-color-hover);color:var(--sl-input-color-hover)}.select:not(.select--disabled) .select__box:focus{background-color:var(--sl-input-background-color-focus);border-color:var(--sl-input-border-color-focus);box-shadow:var(--focus-ring);outline:none;color:var(--sl-input-color-focus)}.select--disabled .select__box{background-color:var(--sl-input-background-color-disabled);border-color:var(--sl-input-border-color-disabled);color:var(--sl-input-color-disabled);opacity:0.5;cursor:not-allowed;outline:none}.select--disabled .select__tags,.select--disabled .select__clear{pointer-events:none}.select__label{flex:1 1 auto;display:flex;align-items:center;user-select:none;scrollbar-width:none;-ms-overflow-style:none;overflow-x:auto;overflow-y:hidden;white-space:nowrap}.select__label::-webkit-scrollbar{width:0;height:0}.select__clear{flex:0 0 auto}.select__icon{flex:0 0 auto;display:inline-flex;transition:var(--sl-transition-medium) transform ease}.select--open .select__icon{transform:rotate(-180deg)}.select--placeholder-visible .select__label{color:var(--sl-input-placeholder-color)}.select--disabled.select--placeholder-visible .select__label{color:var(--sl-input-placeholder-color-disabled)}.select__tags{display:inline-flex;align-items:center;justify-content:center;margin-left:var(--sl-spacing-xx-small)}.select__hidden-select{clip:rect(0 0 0 0);clip-path:inset(50%);height:1px;overflow:hidden;position:absolute;white-space:nowrap;width:1px;position:absolute;top:0;left:0;width:100%;height:100%}.select--small .select__box{border-radius:var(--sl-input-border-radius-small);font-size:var(--sl-input-font-size-small);height:var(--sl-input-height-small)}.select--small .select__label{margin:0 var(--sl-input-spacing-small)}.select--small .select__clear{margin-right:var(--sl-input-spacing-small)}.select--small .select__icon{margin-right:var(--sl-input-spacing-small)}.select--small .select__tags sl-tag:not(:last-of-type){margin-right:var(--sl-spacing-xx-small)}.select--small.select--has-tags .select__label{margin-left:0}.select--medium .select__box{border-radius:var(--sl-input-border-radius-medium);font-size:var(--sl-input-font-size-medium);height:var(--sl-input-height-medium)}.select--medium .select__label{margin:0 var(--sl-input-spacing-medium)}.select--medium .select__clear{margin-right:var(--sl-input-spacing-medium)}.select--medium .select__icon{margin-right:var(--sl-input-spacing-medium)}.select--medium .select__tags sl-tag:not(:last-of-type){margin-right:var(--sl-spacing-xx-small)}.select--medium.select--has-tags .select__label{margin-left:0}.select--large .select__box{border-radius:var(--sl-input-border-radius-large);font-size:var(--sl-input-font-size-large);height:var(--sl-input-height-large)}.select--large .select__label{margin:0 var(--sl-input-spacing-large)}.select--large .select__clear{margin-right:var(--sl-input-spacing-large)}.select--large .select__icon{margin-right:var(--sl-input-spacing-large)}.select--large .select__tags sl-tag:not(:last-of-type){margin-right:var(--sl-spacing-xx-small)}.select--large.select--has-tags .select__label{margin-left:0}.select--pill.select--small .select__box{border-radius:var(--sl-input-height-small)}.select--pill.select--medium .select__box{border-radius:var(--sl-input-height-medium)}.select--pill.select--large .select__box{border-radius:var(--sl-input-height-large)}";export{n as sl_select}