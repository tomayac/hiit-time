import{r as t,c as s,h as e,g as i}from"./p-f58ba550.js";import{h as l,g as h}from"./p-f86f6644.js";import{i as a}from"./p-6a284815.js";let n=0;const o=class{constructor(e){t(this,e),this.slChange=s(this,"sl-change",7),this.slFocus=s(this,"sl-focus",7),this.slBlur=s(this,"sl-blur",7),this.inputId="select-"+ ++n,this.labelId="select-label-"+n,this.helpTextId="select-help-text-"+n,this.hasFocus=!1,this.hasLabel=!1,this.isOpen=!1,this.items=[],this.displayLabel="",this.displayTags=[],this.multiple=!1,this.maxTagsVisible=3,this.disabled=!1,this.name="",this.placeholder="",this.size="medium",this.hoist=!1,this.value="",this.pill=!1,this.label="",this.required=!1,this.clearable=!1,this.invalid=!1}handleLabelChange(){this.detectLabel()}handleMultipleChange(){const t=this.getValueAsArray();this.value=this.multiple?t:t[0]||"",this.syncItemsFromValue()}handleValueChange(){this.syncItemsFromValue(),this.slChange.emit()}connectedCallback(){this.detectLabel=this.detectLabel.bind(this),this.handleBlur=this.handleBlur.bind(this),this.handleFocus=this.handleFocus.bind(this),this.handleClear=this.handleClear.bind(this),this.handleCut=this.handleCut.bind(this),this.handlePaste=this.handlePaste.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleKeyUp=this.handleKeyUp.bind(this),this.handleLabelClick=this.handleLabelClick.bind(this),this.handleTagClick=this.handleTagClick.bind(this),this.handleTagKeyDown=this.handleTagKeyDown.bind(this),this.handleMenuHide=this.handleMenuHide.bind(this),this.handleMenuShow=this.handleMenuShow.bind(this),this.handleMenuSelect=this.handleMenuSelect.bind(this),this.handleSlotChange=this.handleSlotChange.bind(this)}componentWillLoad(){this.detectLabel()}componentDidLoad(){this.resizeObserver=new a(()=>this.resizeMenu()),this.reportDuplicateItemValues(),requestAnimationFrame(()=>this.syncItemsFromValue())}async reportValidity(){return this.input.reportValidity()}async setCustomValidity(t){this.input.setCustomValidity(t)}detectLabel(){this.hasLabel=this.label.length>0||l(this.host,"label")}getItemLabel(t){const s=t.shadowRoot.querySelector("slot:not([name])");return h(s)}getItems(){return[...this.host.querySelectorAll("sl-menu-item")]}getValueAsArray(){return Array.isArray(this.value)?this.value:[this.value]}handleBlur(t){t.stopPropagation(),this.hasFocus=!1,this.slBlur.emit()}handleFocus(t){t.stopPropagation(),this.hasFocus=!0,this.slFocus.emit(),this.input.setSelectionRange(0,0)}handleClear(){this.value=this.multiple?[]:"",this.syncItemsFromValue(),this.dropdown.hide()}handleKeyDown(){this.input.shadowRoot.querySelector('[part="input"]').readOnly=!0}handleKeyUp(){this.input.shadowRoot.querySelector('[part="input"]').readOnly=!1}handleCut(t){t.preventDefault()}handlePaste(t){t.preventDefault()}handleLabelClick(){this.input.setFocus()}handleMenuSelect(t){const s=t.detail.item;this.value=this.multiple?this.value.includes(s.value)?this.value.filter(t=>t!==s.value):[...this.value,s.value]:s.value,this.syncItemsFromValue()}handleMenuShow(t){this.disabled?t.preventDefault():(this.resizeMenu(),this.resizeObserver.observe(this.host),this.isOpen=!0)}handleMenuHide(){this.resizeObserver.unobserve(this.host),this.isOpen=!1,this.input.setFocus()}handleSlotChange(){this.syncItemsFromValue(),this.reportDuplicateItemValues()}handleTagClick(t){t.composedPath().find(t=>{if(t instanceof HTMLElement)return"clear-button"===t.getAttribute("part")})&&t.stopPropagation()}handleTagKeyDown(t){"Enter"===t.key&&t.stopPropagation()}reportDuplicateItemValues(){const t=this.getItems().map(t=>t.value).filter((t,s,e)=>e.indexOf(t)!==s);if(t.length)throw new Error('Duplicate value found on <sl-menu-item> in <sl-select>: "'+t.join('", "')+'"')}resizeMenu(){this.menu.style.width=this.input.clientWidth+"px"}syncItemsFromValue(){const t=this.getItems(),s=this.getValueAsArray();if(t.map(t=>t.checked=s.includes(t.value)),this.multiple){const i=[];if(s.map(s=>t.map(t=>t.value===s?i.push(t):null)),this.displayTags=i.map(t=>e("sl-tag",{exportparts:"base:tag",type:"info",size:this.size,pill:this.pill,clearable:!0,onClick:this.handleTagClick,onKeyDown:this.handleTagKeyDown,"onSl-clear":s=>{s.stopPropagation(),t.checked=!1,this.syncValueFromItems()}},this.getItemLabel(t))),this.maxTagsVisible>0&&this.displayTags.length>this.maxTagsVisible){const t=this.displayTags.length;this.displayTags=this.displayTags.slice(0,this.maxTagsVisible),this.displayTags.push(e("sl-tag",{exportparts:"base:tag",type:"info",size:this.size},"+",t-this.maxTagsVisible))}this.displayLabel=0===this.value.length?"":"â€‹"}else{const e=t.filter(t=>t.value===s[0])[0];this.displayLabel=e?this.getItemLabel(e):"",this.displayTags=[]}}syncValueFromItems(){const t=this.getItems().filter(t=>t.checked).map(t=>t.value);this.value=this.multiple?this.value.filter(s=>t.includes(s)):t.length>0?t[0]:""}render(){var t;return e("div",{part:"form-control",class:{"form-control":!0,"form-control--has-label":this.hasLabel,"form-control--invalid":this.invalid}},e("label",{part:"label",id:this.labelId,class:{label:!0,"label--small":"small"===this.size,"label--medium":"medium"===this.size,"label--large":"large"===this.size,"label--invalid":this.invalid},htmlFor:this.inputId,onClick:this.handleLabelClick},e("slot",{name:"label",onSlotchange:this.detectLabel},this.label)),e("sl-dropdown",{part:"base",ref:t=>this.dropdown=t,hoist:this.hoist,closeOnSelect:!this.multiple,containingElement:this.host,class:{select:!0,"select--open":this.isOpen,"select--empty":0===(null===(t=this.value)||void 0===t?void 0:t.length),"select--focused":this.hasFocus,"select--disabled":this.disabled,"select--multiple":this.multiple,"select--has-tags":this.multiple&&this.displayTags.length>0,"select--small":"small"===this.size,"select--medium":"medium"===this.size,"select--large":"large"===this.size,"select--pill":this.pill},"onSl-show":this.handleMenuShow,"onSl-hide":this.handleMenuHide},e("sl-input",{slot:"trigger",exportparts:"input, label, prefix, clear-button, suffix, help-text",ref:t=>this.input=t,id:this.inputId,class:"select__input",name:this.name,value:this.displayLabel,disabled:this.disabled,pill:this.pill,placeholder:""===this.displayLabel&&0===this.displayTags.length?this.placeholder:null,size:this.size,invalid:this.invalid,clearable:this.clearable,required:this.required,"aria-labelledby":this.labelId,"aria-describedby":this.helpTextId,"onSl-focus":this.handleFocus,"onSl-blur":this.handleBlur,"onSl-clear":this.handleClear,onKeyDown:this.handleKeyDown,onKeyUp:this.handleKeyUp,onCut:this.handleCut,onPaste:this.handlePaste},this.displayTags.length&&e("span",{part:"tags",slot:"prefix",class:"select__tags"},this.displayTags),e("span",{part:"icon",slot:"suffix",class:"select__icon"},e("sl-icon",{name:"chevron-down"}))),e("sl-menu",{ref:t=>this.menu=t,part:"menu",class:"select__menu","onSl-select":this.handleMenuSelect},e("slot",{onSlotchange:this.handleSlotChange}))),e("div",{part:"help-text",id:this.helpTextId,class:{"help-text":!0,"help-text--small":"small"===this.size,"help-text--medium":"medium"===this.size,"help-text--large":"large"===this.size,"help-text--invalid":this.invalid}},e("slot",{name:"help-text"})))}get host(){return i(this)}static get watchers(){return{label:["handleLabelChange"],multiple:["handleMultipleChange"],value:["handleValueChange"]}}};o.style=":host{position:relative;box-sizing:border-box}:host *,:host *:before,:host *:after{box-sizing:inherit}.form-control .label{display:none}.form-control--has-label .label{display:inline-block;color:var(--sl-input-label-color);margin-bottom:var(--sl-spacing-xxx-small)}.form-control--has-label .label.label--small{font-size:var(--sl-input-label-font-size-small)}.form-control--has-label .label.label--medium{font-size:var(--sl-input-label-font-size-medium)}.form-control--has-label .label.label--large{font-size:var(--sl-input-label-font-size-large)}.form-control--has-label .label.label--valid{color:var(--sl-input-label-color-valid)}.form-control--has-label .label.label--invalid{color:var(--sl-input-label-color-invalid)}.help-text{color:var(--sl-input-help-text-color)}.help-text.help-text--small{font-size:var(--sl-input-help-text-font-size-small)}.help-text.help-text--medium{font-size:var(--sl-input-help-text-font-size-medium)}.help-text.help-text--large{font-size:var(--sl-input-help-text-font-size-large)}.help-text.help-text--valid{color:var(--sl-input-help-text-color-valid)}.help-text.help-text--invalid{color:var(--sl-input-help-text-color-invalid)}.help-text ::slotted(*){margin-top:var(--sl-spacing-xxx-small)}:host{display:block}.select{width:100%}.select__input{flex:1 1 auto;width:100%}.select__input:not([disabled])::part(base){cursor:pointer}.select__input::part(input){caret-color:transparent}.select__input span[slot=prefix]{margin-left:var(--sl-spacing-xx-small)}.select__input span[slot=prefix] sl-tag:not(:last-of-type){margin-right:var(--sl-spacing-xx-small)}.select__icon{display:inline-flex}.select__icon sl-icon{transition:var(--sl-transition-medium) transform ease}.select--open .select__icon sl-icon{transform:rotate(-180deg)}.select:not(.select--empty) .select__input::part(clear-button){visibility:visible}.select--multiple .select__input::part(input){flex:1 1 0}.select--multiple .select__input::part(prefix){scrollbar-width:none;-ms-overflow-style:none;flex-shrink:1;overflow-x:auto;white-space:nowrap}.select--multiple .select__input::part(prefix)::-webkit-scrollbar{width:0;height:0}.select--multiple .select__input::part(clear-button),.select--multiple .select__input::part(suffix){padding-left:var(--sl-spacing-x-small)}.select--multiple.select--has-tags .select__input::part(input){margin:0}";export{o as sl_select}